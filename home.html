<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
/*지우려면 부모의 아이디를 알아야한다. check가 트루면 부모가 감싸고 있는 아이디를 알아야한다. */
/*아예 밖에다가 let count = 0;  "a" + count --> 속성 알고 만들고 순번 즉 부모랑 data속성 div 값 같게 만들수 있다.*/
/*계속 고민하는 과정*/


    </style>
</head>
<body>
    <div>
        <input type="text" id="txtBox">
        <button id="btn">Add</button>
    </div>
    <div>
        <div>
            <button id="btn2">휴지통</button> 
        </div>
        
        <div id="maini">
   

        </div>
    </div>


    <script>
        const txtBox = document.getElementById("txtBox");
        const btn = document.getElementById("btn");
        const maini = document.getElementById("maini");
        const btn2 = document.getElementById("btn2");
        //class 도입 -> text decoration --> class line
        //check박스는 직접적으로 클릭 불가 때문에 부모를 클릭해야함
        //부모 아래에 자식 요소 접근을 위해선 target 이벤트 위임을 받으면 됨
        let ar = [];
        maini.addEventListener("click", function(e) { //input class들 접근 --> input들 여러개니까
            //check된 내용들 배열에 담아서 -> 클래스 추가해야지
            if(e.target.classList.contains("c1")) {
                if(e.target.checked) {
                    //console.log("checkbox입니다.");
                    //class로 id값에 접근하는 방식 -> 부모에 접근해야 하니까 동일시
                    ar.push(e.target.getAttribute("data-del-num")); //배열에 더하는 것
                }
            }
            let br = []; //div클래스 접근을 위해
            for(let i=0; i<ar.length;i++) { //check된 인풋만 돌리고
               // console.log(ar[i]);
                br.push(document.getElementById(ar[i]));
                br[i].classList.add("line");
            }
            // for(let i=0; i<br.length; i++) {  
            // }
        })


        //delete로 삭제
        btn2.addEventListener("click", function(e) {
            if(e.target.classList.contains("c1")) {
                if(e.target.checked) {
                    //console.log("checkbox입니다.");
                    //class로 id값에 접근하는 방식 -> 부모에 접근해야 하니까 동일시
                    ar.push(e.target.getAttribute("data-del-num")); //배열에 더하는 것
                }
            }
            let br = []; //div클래스 접근을 위해
            for(let i=0; i<ar.length;i++) { //check된 인풋만 돌리고
               // console.log(ar[i]);
                br.push(document.getElementById(ar[i]));
            }
            for(let i=0; i<br.length; i++) { //div class 자체니까 div 클래스 자체 삭제
                br[i].remove();
            }
        })



        //check박스 생성
        let a = 0;
        btn.addEventListener("click", function() {
            let txt = txtBox.value;

            let div = document.createElement("div");
            div.id = "result" + a;

            let input = document.createElement("input");
            input.type = "checkbox";
            input.className = "c1";
            input.setAttribute("data-del-num", "result"+a)
            a++;

            let span = document.createElement("span");
            span.append(txt);
            div.appendChild(input);
            div.appendChild(span);
            maini.appendChild(div);
        })

    </script>

</body>
</html>